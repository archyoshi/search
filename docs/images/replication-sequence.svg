<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1011px" preserveAspectRatio="none" style="width:996px;height:1011px;" version="1.1" viewBox="0 0 996 1011" width="996px" zoomAndPan="magnify"><defs><filter height="300%" id="f1nonnc2rhd2j" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="93" x2="93" y1="39.6094" y2="970.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="254" x2="254" y1="39.6094" y2="970.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="384.5" x2="384.5" y1="39.6094" y2="970.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="628" x2="628" y1="39.6094" y2="970.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="871" x2="871" y1="39.6094" y2="970.1016"/><rect fill="#FEFECE" filter="url(#f1nonnc2rhd2j)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="15" y="24.5332">SlaveReplWorkTrashDir</text><rect fill="#FEFECE" filter="url(#f1nonnc2rhd2j)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="8" y="969.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="15" y="990.6348">SlaveReplWorkTrashDir</text><rect fill="#FEFECE" filter="url(#f1nonnc2rhd2j)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="188" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="195" y="24.5332">SlaveReplWorkDir</text><rect fill="#FEFECE" filter="url(#f1nonnc2rhd2j)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="188" y="969.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="195" y="990.6348">SlaveReplWorkDir</text><rect fill="#FEFECE" filter="url(#f1nonnc2rhd2j)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="332.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="339.5" y="24.5332">SlaveIndexDir</text><rect fill="#FEFECE" filter="url(#f1nonnc2rhd2j)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="332.5" y="969.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="339.5" y="990.6348">SlaveIndexDir</text><rect fill="#FEFECE" filter="url(#f1nonnc2rhd2j)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="602" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="609" y="24.5332">Slave</text><rect fill="#FEFECE" filter="url(#f1nonnc2rhd2j)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="602" y="969.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="609" y="990.6348">Slave</text><rect fill="#FEFECE" filter="url(#f1nonnc2rhd2j)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="841" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="848" y="24.5332">Master</text><rect fill="#FEFECE" filter="url(#f1nonnc2rhd2j)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="841" y="969.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="848" y="990.6348">Master</text><rect fill="#EEEEEE" filter="url(#f1nonnc2rhd2j)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="981.5" x="3" y="70.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="984.5" y1="70.7852" y2="70.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="984.5" y1="73.7852" y2="73.7852"/><rect fill="#EEEEEE" filter="url(#f1nonnc2rhd2j)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="217" x="385.25" y="59.6094"/><line style="stroke: #000000; stroke-width: 1.0;" x1="391.25" x2="391.25" y1="71.7852" y2="71.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="391.25" x2="391.25" y1="73.7852" y2="73.7852"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="395.25" y="76.6045">starting the replication process</text><line style="stroke: #000000; stroke-width: 1.0;" x1="594.25" x2="594.25" y1="71.7852" y2="71.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="594.25" x2="594.25" y1="73.7852" y2="73.7852"/><polygon fill="#A80036" points="859.5,111.9609,869.5,115.9609,859.5,119.9609,863.5,115.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="628.5" x2="865.5" y1="115.9609" y2="115.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="635.5" y="111.4561">request replication session</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="871.5" x2="913.5" y1="146.6641" y2="146.6641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="913.5" x2="913.5" y1="146.6641" y2="159.6641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="872.5" x2="913.5" y1="159.6641" y2="159.6641"/><polygon fill="#A80036" points="882.5,155.6641,872.5,159.6641,882.5,163.6641,878.5,159.6641" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="878.5" y="141.8076">Take a snapshot</text><polygon fill="#A80036" points="639.5,185.6641,629.5,189.6641,639.5,193.6641,635.5,189.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="633.5" x2="870.5" y1="189.6641" y2="189.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="645.5" y="185.1592">return the file list</text><rect fill="#EEEEEE" filter="url(#f1nonnc2rhd2j)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="981.5" x="3" y="219.1914"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="984.5" y1="219.1914" y2="219.1914"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="984.5" y1="222.1914" y2="222.1914"/><rect fill="#EEEEEE" filter="url(#f1nonnc2rhd2j)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="217" x="385.25" y="208.0156"/><line style="stroke: #000000; stroke-width: 1.0;" x1="391.25" x2="391.25" y1="220.1914" y2="220.1914"/><line style="stroke: #000000; stroke-width: 1.0;" x1="391.25" x2="391.25" y1="222.1914" y2="222.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="395.25" y="225.0107">choosing a replication strategy</text><line style="stroke: #000000; stroke-width: 1.0;" x1="594.25" x2="594.25" y1="220.1914" y2="220.1914"/><line style="stroke: #000000; stroke-width: 1.0;" x1="594.25" x2="594.25" y1="222.1914" y2="222.1914"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="628.5" x2="670.5" y1="279.5703" y2="279.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="670.5" x2="670.5" y1="279.5703" y2="292.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="629.5" x2="670.5" y1="292.5703" y2="292.5703"/><polygon fill="#A80036" points="639.5,288.5703,629.5,292.5703,639.5,296.5703,635.5,292.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="635.5" y="274.7139">Choose the replicaton strategy</text><path d="M364,247.3672 L364,306.3672 L619,306.3672 L619,257.3672 L609,247.3672 L364,247.3672 " fill="#FBFB77" filter="url(#f1nonnc2rhd2j)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M609,247.3672 L609,257.3672 L619,257.3672 L609,247.3672 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="370" y="265.8623">If the master index_uuid did not changed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="370" y="282.2139">use the incremental strategy, if not use</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="370" y="298.5654">the full copy strategy.</text><rect fill="#EEEEEE" filter="url(#f1nonnc2rhd2j)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="981.5" x="3" y="336.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="984.5" y1="336.5977" y2="336.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="984.5" y1="339.5977" y2="339.5977"/><rect fill="#EEEEEE" filter="url(#f1nonnc2rhd2j)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="299" x="344.25" y="325.4219"/><line style="stroke: #000000; stroke-width: 1.0;" x1="350.25" x2="350.25" y1="337.5977" y2="337.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="350.25" x2="350.25" y1="339.5977" y2="339.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="277" x="354.25" y="342.417">Alternative: Incremental replication process</text><line style="stroke: #000000; stroke-width: 1.0;" x1="635.25" x2="635.25" y1="337.5977" y2="337.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="635.25" x2="635.25" y1="339.5977" y2="339.5977"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="628.5" x2="670.5" y1="382.125" y2="382.125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="670.5" x2="670.5" y1="382.125" y2="395.125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="629.5" x2="670.5" y1="395.125" y2="395.125"/><polygon fill="#A80036" points="639.5,391.125,629.5,395.125,639.5,399.125,635.5,395.125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="635.5" y="377.2686">compare local files and the given file list</text><polygon fill="#A80036" points="859.5,421.125,869.5,425.125,859.5,429.125,863.5,425.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="628.5" x2="865.5" y1="425.125" y2="425.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="635.5" y="420.6201">request the diff files</text><polygon fill="#A80036" points="639.5,451.4766,629.5,455.4766,639.5,459.4766,635.5,455.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="633.5" x2="870.5" y1="455.4766" y2="455.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="645.5" y="450.9717">return the requested files</text><polygon fill="#A80036" points="265.5,481.8281,255.5,485.8281,265.5,489.8281,261.5,485.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="259.5" x2="627.5" y1="485.8281" y2="485.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="271.5" y="481.3232">store the new files</text><polygon fill="#A80036" points="372.5,512.1797,382.5,516.1797,372.5,520.1797,376.5,516.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="254.5" x2="378.5" y1="516.1797" y2="516.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="261.5" y="511.6748">move the new files</text><polygon fill="#A80036" points="395.5,542.5313,385.5,546.5313,395.5,550.5313,391.5,546.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389.5" x2="627.5" y1="546.5313" y2="546.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="401.5" y="542.0264">reload the IndexSearcher/IndexReader</text><polygon fill="#A80036" points="395.5,572.8828,385.5,576.8828,395.5,580.8828,391.5,576.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389.5" x2="627.5" y1="576.8828" y2="576.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="401.5" y="572.3779">delete the old files</text><rect fill="#EEEEEE" filter="url(#f1nonnc2rhd2j)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="981.5" x="3" y="606.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="984.5" y1="606.4102" y2="606.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="984.5" y1="609.4102" y2="609.4102"/><rect fill="#EEEEEE" filter="url(#f1nonnc2rhd2j)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="247" x="370.25" y="595.2344"/><line style="stroke: #000000; stroke-width: 1.0;" x1="376.25" x2="376.25" y1="607.4102" y2="607.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="376.25" x2="376.25" y1="609.4102" y2="609.4102"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="380.25" y="612.2295">Alternative: Full replication process</text><line style="stroke: #000000; stroke-width: 1.0;" x1="609.25" x2="609.25" y1="607.4102" y2="607.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="609.25" x2="609.25" y1="609.4102" y2="609.4102"/><polygon fill="#A80036" points="859.5,647.5859,869.5,651.5859,859.5,655.5859,863.5,651.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="628.5" x2="865.5" y1="651.5859" y2="651.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="635.5" y="647.0811">request every index files</text><polygon fill="#A80036" points="639.5,677.9375,629.5,681.9375,639.5,685.9375,635.5,681.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="633.5" x2="870.5" y1="681.9375" y2="681.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="645.5" y="677.4326">return the requested files</text><polygon fill="#A80036" points="265.5,708.2891,255.5,712.2891,265.5,716.2891,261.5,712.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="259.5" x2="627.5" y1="712.2891" y2="712.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="271.5" y="707.7842">store the new files</text><polygon fill="#A80036" points="104,738.6406,94,742.6406,104,746.6406,100,742.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="98" x2="383.5" y1="742.6406" y2="742.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="110" y="738.1357">move the old files</text><polygon fill="#A80036" points="372.5,768.9922,382.5,772.9922,372.5,776.9922,376.5,772.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="254.5" x2="378.5" y1="772.9922" y2="772.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="261.5" y="768.4873">move the new files</text><polygon fill="#A80036" points="395.5,799.3438,385.5,803.3438,395.5,807.3438,391.5,803.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389.5" x2="627.5" y1="803.3438" y2="803.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="401.5" y="798.8389">reload the IndexSearcher/IndexReader</text><polygon fill="#A80036" points="104,829.6953,94,833.6953,104,837.6953,100,833.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="98" x2="627.5" y1="833.6953" y2="833.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="110" y="829.1904">delete the old files</text><rect fill="#EEEEEE" filter="url(#f1nonnc2rhd2j)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="981.5" x="3" y="863.2227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="984.5" y1="863.2227" y2="863.2227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="984.5" y1="866.2227" y2="866.2227"/><rect fill="#EEEEEE" filter="url(#f1nonnc2rhd2j)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="214" x="386.75" y="852.0469"/><line style="stroke: #000000; stroke-width: 1.0;" x1="392.75" x2="392.75" y1="864.2227" y2="864.2227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="392.75" x2="392.75" y1="866.2227" y2="866.2227"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="396.75" y="869.042">ending the replication process</text><line style="stroke: #000000; stroke-width: 1.0;" x1="592.75" x2="592.75" y1="864.2227" y2="864.2227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="592.75" x2="592.75" y1="866.2227" y2="866.2227"/><polygon fill="#A80036" points="859.5,904.3984,869.5,908.3984,859.5,912.3984,863.5,908.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="628.5" x2="865.5" y1="908.3984" y2="908.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="635.5" y="903.8936">release replication session</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="871.5" x2="913.5" y1="939.1016" y2="939.1016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="913.5" x2="913.5" y1="939.1016" y2="952.1016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="872.5" x2="913.5" y1="952.1016" y2="952.1016"/><polygon fill="#A80036" points="882.5,948.1016,872.5,952.1016,882.5,956.1016,878.5,952.1016" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="878.5" y="934.2451">release snapshot</text><!--
@startuml
participant SlaveReplWorkTrashDir
participant SlaveReplWorkDir
participant SlaveIndexDir
participant Slave
participant Master
==== starting the replication process ====
Slave->Master : request replication session
Master->Master : Take a snapshot
Master->Slave : return the file list

==== choosing a replication strategy ====
Slave->Slave : Choose the replicaton strategy
note left
  If the master index_uuid did not changed
  use the incremental strategy, if not use
  the full copy strategy.
end note

==== Alternative: Incremental replication process ====
Slave->Slave : compare local files and the given file list
Slave->Master : request the diff files
Master->Slave : return the requested files
Slave->SlaveReplWorkDir : store the new files
SlaveReplWorkDir->SlaveIndexDir : move the new files
Slave->SlaveIndexDir : reload the IndexSearcher/IndexReader
Slave->SlaveIndexDir : delete the old files

==== Alternative: Full replication process ====
Slave->Master : request every index files
Master->Slave : return the requested files
Slave->SlaveReplWorkDir : store the new files
SlaveIndexDir->SlaveReplWorkTrashDir : move the old files
SlaveReplWorkDir->SlaveIndexDir : move the new files
Slave->SlaveIndexDir : reload the IndexSearcher/IndexReader
Slave->SlaveReplWorkTrashDir : delete the old files

==== ending the replication process ====
Slave->Master : release replication session
Master->Master : release snapshot
@enduml

PlantUML version 1.2018.01(Sun Jan 28 19:08:22 CET 2018)
(APACHE source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_161-b12
Operating System: Windows 7
OS Version: 6.1
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>