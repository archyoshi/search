<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="998px" preserveAspectRatio="none" style="width:995px;height:998px;" version="1.1" viewBox="0 0 995 998" width="995px" zoomAndPan="magnify"><defs><filter height="300%" id="fs3hqhwj65ulm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="93" x2="93" y1="39.6094" y2="957.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="254" x2="254" y1="39.6094" y2="957.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="384.5" x2="384.5" y1="39.6094" y2="957.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="637" x2="637" y1="39.6094" y2="957.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="870" x2="870" y1="39.6094" y2="957.1016"/><rect fill="#FEFECE" filter="url(#fs3hqhwj65ulm)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="15" y="24.5332">SlaveReplWorkTrashDir</text><rect fill="#FEFECE" filter="url(#fs3hqhwj65ulm)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="8" y="956.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="15" y="977.6348">SlaveReplWorkTrashDir</text><rect fill="#FEFECE" filter="url(#fs3hqhwj65ulm)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="188" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="195" y="24.5332">SlaveReplWorkDir</text><rect fill="#FEFECE" filter="url(#fs3hqhwj65ulm)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="188" y="956.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="195" y="977.6348">SlaveReplWorkDir</text><rect fill="#FEFECE" filter="url(#fs3hqhwj65ulm)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="332.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="339.5" y="24.5332">SlaveIndexDir</text><rect fill="#FEFECE" filter="url(#fs3hqhwj65ulm)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="332.5" y="956.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="339.5" y="977.6348">SlaveIndexDir</text><rect fill="#FEFECE" filter="url(#fs3hqhwj65ulm)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="611" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="618" y="24.5332">Slave</text><rect fill="#FEFECE" filter="url(#fs3hqhwj65ulm)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="611" y="956.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="618" y="977.6348">Slave</text><rect fill="#FEFECE" filter="url(#fs3hqhwj65ulm)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="840" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="847" y="24.5332">Master</text><rect fill="#FEFECE" filter="url(#fs3hqhwj65ulm)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="840" y="956.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="847" y="977.6348">Master</text><rect fill="#EEEEEE" filter="url(#fs3hqhwj65ulm)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="980.5" x="3" y="70.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="983.5" y1="70.7852" y2="70.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="983.5" y1="73.7852" y2="73.7852"/><rect fill="#EEEEEE" filter="url(#fs3hqhwj65ulm)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="217" x="384.75" y="59.6094"/><line style="stroke: #000000; stroke-width: 1.0;" x1="390.75" x2="390.75" y1="71.7852" y2="71.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="390.75" x2="390.75" y1="73.7852" y2="73.7852"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="394.75" y="76.6045">starting the replication process</text><line style="stroke: #000000; stroke-width: 1.0;" x1="593.75" x2="593.75" y1="71.7852" y2="71.7852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="593.75" x2="593.75" y1="73.7852" y2="73.7852"/><polygon fill="#A80036" points="858.5,111.9609,868.5,115.9609,858.5,119.9609,862.5,115.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="864.5" y1="115.9609" y2="115.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="644.5" y="111.4561">request replication session</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="870.5" x2="912.5" y1="146.6641" y2="146.6641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="912.5" x2="912.5" y1="146.6641" y2="159.6641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="871.5" x2="912.5" y1="159.6641" y2="159.6641"/><polygon fill="#A80036" points="881.5,155.6641,871.5,159.6641,881.5,163.6641,877.5,159.6641" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="877.5" y="141.8076">Take a snapshot</text><polygon fill="#A80036" points="648.5,185.6641,638.5,189.6641,648.5,193.6641,644.5,189.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642.5" x2="869.5" y1="189.6641" y2="189.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="654.5" y="185.1592">return the file list and the index_uuid</text><rect fill="#EEEEEE" filter="url(#fs3hqhwj65ulm)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="980.5" x="3" y="219.1914"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="983.5" y1="219.1914" y2="219.1914"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="983.5" y1="222.1914" y2="222.1914"/><rect fill="#EEEEEE" filter="url(#fs3hqhwj65ulm)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="217" x="384.75" y="208.0156"/><line style="stroke: #000000; stroke-width: 1.0;" x1="390.75" x2="390.75" y1="220.1914" y2="220.1914"/><line style="stroke: #000000; stroke-width: 1.0;" x1="390.75" x2="390.75" y1="222.1914" y2="222.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="394.75" y="225.0107">choosing a replication strategy</text><line style="stroke: #000000; stroke-width: 1.0;" x1="593.75" x2="593.75" y1="220.1914" y2="220.1914"/><line style="stroke: #000000; stroke-width: 1.0;" x1="593.75" x2="593.75" y1="222.1914" y2="222.1914"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="679.5" y1="279.5703" y2="279.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="679.5" x2="679.5" y1="279.5703" y2="292.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="638.5" x2="679.5" y1="292.5703" y2="292.5703"/><polygon fill="#A80036" points="648.5,288.5703,638.5,292.5703,648.5,296.5703,644.5,292.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="644.5" y="274.7139">Choose the replicaton strategy</text><path d="M373,247.3672 L373,306.3672 L628,306.3672 L628,257.3672 L618,247.3672 L373,247.3672 " fill="#FBFB77" filter="url(#fs3hqhwj65ulm)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M618,247.3672 L618,257.3672 L628,257.3672 L618,247.3672 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="379" y="265.8623">If the master index_uuid did not changed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="379" y="282.2139">use the incremental strategy, if not use</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="379" y="298.5654">the full copy strategy.</text><rect fill="#EEEEEE" filter="url(#fs3hqhwj65ulm)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="980.5" x="3" y="336.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="983.5" y1="336.5977" y2="336.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="983.5" y1="339.5977" y2="339.5977"/><rect fill="#EEEEEE" filter="url(#fs3hqhwj65ulm)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="299" x="343.75" y="325.4219"/><line style="stroke: #000000; stroke-width: 1.0;" x1="349.75" x2="349.75" y1="337.5977" y2="337.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="349.75" x2="349.75" y1="339.5977" y2="339.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="277" x="353.75" y="342.417">Alternative: Incremental replication process</text><line style="stroke: #000000; stroke-width: 1.0;" x1="634.75" x2="634.75" y1="337.5977" y2="337.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="634.75" x2="634.75" y1="339.5977" y2="339.5977"/><polygon fill="#A80036" points="395.5,377.7734,385.5,381.7734,395.5,385.7734,391.5,381.7734" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="625.5,377.7734,635.5,381.7734,625.5,385.7734,629.5,381.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389.5" x2="631.5" y1="381.7734" y2="381.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="401.5" y="377.2686">compare local files and the given file list</text><polygon fill="#A80036" points="858.5,408.125,868.5,412.125,858.5,416.125,862.5,412.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="864.5" y1="412.125" y2="412.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="644.5" y="407.6201">request the diff files</text><polygon fill="#A80036" points="648.5,438.4766,638.5,442.4766,648.5,446.4766,644.5,442.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642.5" x2="869.5" y1="442.4766" y2="442.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="654.5" y="437.9717">return the requested files</text><polygon fill="#A80036" points="265.5,468.8281,255.5,472.8281,265.5,476.8281,261.5,472.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="259.5" x2="636.5" y1="472.8281" y2="472.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="271.5" y="468.3232">store the new files</text><polygon fill="#A80036" points="372.5,499.1797,382.5,503.1797,372.5,507.1797,376.5,503.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="254.5" x2="378.5" y1="503.1797" y2="503.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="261.5" y="498.6748">move the new files</text><polygon fill="#A80036" points="395.5,529.5313,385.5,533.5313,395.5,537.5313,391.5,533.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389.5" x2="636.5" y1="533.5313" y2="533.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="401.5" y="529.0264">reload the IndexSearcher/IndexReader</text><polygon fill="#A80036" points="395.5,559.8828,385.5,563.8828,395.5,567.8828,391.5,563.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389.5" x2="636.5" y1="563.8828" y2="563.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="401.5" y="559.3779">delete the old files</text><rect fill="#EEEEEE" filter="url(#fs3hqhwj65ulm)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="980.5" x="3" y="593.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="983.5" y1="593.4102" y2="593.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="983.5" y1="596.4102" y2="596.4102"/><rect fill="#EEEEEE" filter="url(#fs3hqhwj65ulm)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="247" x="369.75" y="582.2344"/><line style="stroke: #000000; stroke-width: 1.0;" x1="375.75" x2="375.75" y1="594.4102" y2="594.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="375.75" x2="375.75" y1="596.4102" y2="596.4102"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="379.75" y="599.2295">Alternative: Full replication process</text><line style="stroke: #000000; stroke-width: 1.0;" x1="608.75" x2="608.75" y1="594.4102" y2="594.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="608.75" x2="608.75" y1="596.4102" y2="596.4102"/><polygon fill="#A80036" points="858.5,634.5859,868.5,638.5859,858.5,642.5859,862.5,638.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="864.5" y1="638.5859" y2="638.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="644.5" y="634.0811">request every index files</text><polygon fill="#A80036" points="648.5,664.9375,638.5,668.9375,648.5,672.9375,644.5,668.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="642.5" x2="869.5" y1="668.9375" y2="668.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="654.5" y="664.4326">return the requested files</text><polygon fill="#A80036" points="265.5,695.2891,255.5,699.2891,265.5,703.2891,261.5,699.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="259.5" x2="636.5" y1="699.2891" y2="699.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="271.5" y="694.7842">store the new files</text><polygon fill="#A80036" points="104,725.6406,94,729.6406,104,733.6406,100,729.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="98" x2="383.5" y1="729.6406" y2="729.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="110" y="725.1357">move the old files</text><polygon fill="#A80036" points="372.5,755.9922,382.5,759.9922,372.5,763.9922,376.5,759.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="254.5" x2="378.5" y1="759.9922" y2="759.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="261.5" y="755.4873">move the new files</text><polygon fill="#A80036" points="395.5,786.3438,385.5,790.3438,395.5,794.3438,391.5,790.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389.5" x2="636.5" y1="790.3438" y2="790.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="401.5" y="785.8389">reload the IndexSearcher/IndexReader</text><polygon fill="#A80036" points="104,816.6953,94,820.6953,104,824.6953,100,820.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="98" x2="636.5" y1="820.6953" y2="820.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="110" y="816.1904">delete the old files</text><rect fill="#EEEEEE" filter="url(#fs3hqhwj65ulm)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="980.5" x="3" y="850.2227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="983.5" y1="850.2227" y2="850.2227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="983.5" y1="853.2227" y2="853.2227"/><rect fill="#EEEEEE" filter="url(#fs3hqhwj65ulm)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="214" x="386.25" y="839.0469"/><line style="stroke: #000000; stroke-width: 1.0;" x1="392.25" x2="392.25" y1="851.2227" y2="851.2227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="392.25" x2="392.25" y1="853.2227" y2="853.2227"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="396.25" y="856.042">ending the replication process</text><line style="stroke: #000000; stroke-width: 1.0;" x1="592.25" x2="592.25" y1="851.2227" y2="851.2227"/><line style="stroke: #000000; stroke-width: 1.0;" x1="592.25" x2="592.25" y1="853.2227" y2="853.2227"/><polygon fill="#A80036" points="858.5,891.3984,868.5,895.3984,858.5,899.3984,862.5,895.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="637.5" x2="864.5" y1="895.3984" y2="895.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="644.5" y="890.8936">release replication session</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="870.5" x2="912.5" y1="926.1016" y2="926.1016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="912.5" x2="912.5" y1="926.1016" y2="939.1016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="871.5" x2="912.5" y1="939.1016" y2="939.1016"/><polygon fill="#A80036" points="881.5,935.1016,871.5,939.1016,881.5,943.1016,877.5,939.1016" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="877.5" y="921.2451">release snapshot</text><!--
@startuml
participant SlaveReplWorkTrashDir
participant SlaveReplWorkDir
participant SlaveIndexDir
participant Slave
participant Master
==== starting the replication process ====
Slave->Master : request replication session
Master->Master : Take a snapshot
Master->Slave : return the file list and the index_uuid

==== choosing a replication strategy ====
Slave->Slave : Choose the replicaton strategy
note left
  If the master index_uuid did not changed
  use the incremental strategy, if not use
  the full copy strategy.
end note

==== Alternative: Incremental replication process ====
Slave<->SlaveIndexDir : compare local files and the given file list
Slave->Master : request the diff files
Master->Slave : return the requested files
Slave->SlaveReplWorkDir : store the new files
SlaveReplWorkDir->SlaveIndexDir : move the new files
Slave->SlaveIndexDir : reload the IndexSearcher/IndexReader
Slave->SlaveIndexDir : delete the old files

==== Alternative: Full replication process ====
Slave->Master : request every index files
Master->Slave : return the requested files
Slave->SlaveReplWorkDir : store the new files
SlaveIndexDir->SlaveReplWorkTrashDir : move the old files
SlaveReplWorkDir->SlaveIndexDir : move the new files
Slave->SlaveIndexDir : reload the IndexSearcher/IndexReader
Slave->SlaveReplWorkTrashDir : delete the old files

==== ending the replication process ====
Slave->Master : release replication session
Master->Master : release snapshot
@enduml

PlantUML version 1.2018.01(Sun Jan 28 19:08:22 CET 2018)
(APACHE source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_161-b12
Operating System: Windows 7
OS Version: 6.1
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>